---
layout: default
---

<article class="library-book">
  <div class="library-book__hero">
    <div class="library-book__hero-content">
      <div class="library-book__cover">
        {% if page.cover_image %}
          <img src="{{ page.cover_image | relative_url }}" alt="{{ page.title }} cover" class="library-book__cover-image">
        {% else %}
          <div class="library-book__cover-placeholder">
            <span>{{ page.title }}</span>
          </div>
        {% endif %}
      </div>
      
      <div class="library-book__details">
        <h1 class="library-book__title">{{ page.title }}</h1>
        {% if page.subtitle %}
          <p class="library-book__subtitle">{{ page.subtitle }}</p>
        {% endif %}
        
        <div class="library-book__meta">
          {% if page.genre %}
            <span class="library-book__genre">{{ page.genre }}</span>
          {% endif %}
          {% if page.page_count %}
            <span class="library-book__pages">{{ page.page_count }} pages</span>
          {% endif %}
          {% if page.publication_date %}
            <span class="library-book__date">{{ page.publication_date | date: "%B %Y" }}</span>
          {% endif %}
        </div>
      </div>
    </div>
  </div>

  {% if page.summary %}
  <section class="library-book__summary visually-hidden">
    <h2>Summary</h2>
    <div class="library-book__summary-text ">
      {{ page.summary | markdownify }}
    </div>
  </section>
  {% endif %}

  <section class="library-book__content prose">
    {{ content }}
  </section>

  <section class="library-book__toc">
    <h2>Table of Contents</h2>
    <div class="library-book__chapters">
      {% assign book_folder = page.url | split: '/' | slice: 1, 3 | join: '/' %}
      {% assign chapters = site.pages | where_exp: "page", "page.url contains book_folder" | where_exp: "page", "page.layout == 'library_chapter'" | sort: "order" %}
      
      {% if chapters.size > 0 %}
        <ol class="library-book__chapter-list">
          {% for chapter in chapters %}
            <li class="library-book__chapter-item">
              <a href="{{ chapter.url | relative_url }}" class="library-book__chapter-link">
                <span class="library-book__chapter-number">Chapter {{ chapter.chapter }}</span>
                <span class="library-book__chapter-title">{{ chapter.title }}</span>
              </a>
            </li>
          {% endfor %}
        </ol>
      {% else %}
        <p class="library-book__no-chapters">No chapters available yet.</p>
      {% endif %}
    </div>
  </section>

  <nav class="library-book__navigation">
    <a href="{{ '/library/' | relative_url }}" class="library-book__back-link">← Back to Library</a>
  </nav>
</article>